<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<sqlGroup name="account">
	<sql id="login">
		SELECT A.ACCOUNTID, E.POSID, A.USERNAME, A.VALID, A.ROLEID
			, A.NEWAUTH, E.WORKNUMBER, E.EMPNAME, E.PHONE, E.SHORTNUMBER
			, R.NAME AS POSNAME, R.STEPID AS EMPPOSID, (
				SELECT ID
				FROM REGION_DEPART
				WHERE STEPID = SUBSTR(R.STEPID, 0, 2)
				) AS FACTORYPOSID, (
				SELECT ID
				FROM REGION_DEPART
				WHERE STEPID = SUBSTR(R.STEPID, 0, 4)
				) AS DEPTPOSID, (
				SELECT ID
				FROM REGION_DEPART
				WHERE STEPID = SUBSTR(R.STEPID, 0, 6)
				) AS DEPTREGIONPOSID
			, E.ID AS EMPBARCODE
		FROM (
			SELECT ACCOUNTID, USERNAME, VALID, ROLEID, NEWAUTH
			FROM ACCOUNT_INFO
			WHERE USERNAME = ?
				AND PASSWORD = ?
		) A
		LEFT JOIN EMPLOYEE_INFO E ON A.ACCOUNTID = E.ID 
			LEFT JOIN REGION_DEPART R ON R.ID = E.POSID 
	</sql>

</sqlGroup>